# ZIP转ARCPKG工具

一个用于将Arcaea谱面ZIP包转换为ArcCreate可用的arcpkg格式的在线工具。

## 功能特点

- 🎵 **支持批量转换**：一次上传多个ZIP文件进行批量处理
- 🎨 **自动检测与手动输入**：自动解析配置文件，支持手动补充元数据
- 🖼️ **背景图片处理**：自动检测背景图片，支持手动上传或跳过
- 📊 **实时进度显示**：清晰的进度条和详细的处理日志
- 💾 **离线处理**：所有处理均在浏览器端完成，文件不上传至服务器
- 📱 **响应式设计**：适配桌面和移动设备

## 支持的文件格式

### 必需文件
- `base.ogg` - 歌曲音频文件（OGG格式）
- `base.jpg` - 曲绘图片（JPG格式）
- `slst.txt` 或 `songlist.txt` - 歌曲配置文件（最好有）

### 可选文件
- `.aff` 谱面文件（按难度命名：`0.aff`, `1.aff`, `2.aff`等）
- 包含"Background"的JPG背景图片文件

## 使用说明

### 基本使用流程

1. **上传ZIP文件**
   - 拖拽ZIP文件到上传区域，或点击选择文件
   - 支持批量上传多个ZIP文件

2. **元数据输入**（如配置文件缺失）
   - 输入曲师（Illustration）名称
   - 输入谱师（Chart）名称  
   - 设置BPM值

3. **背景图片处理**
   - 自动检测ZIP包中的背景图片
   - 可选择上传自定义背景图片
   - 可选择跳过背景图片

4. **转换与下载**
   - 等待转换完成
   - 下载生成的`.arcpkg`文件

### 文件命名规范

- 谱面文件：`0.aff` (Past), `1.aff` (Present), `2.aff` (Future), `3.aff` (Beyond), `4.aff` (Eternal)
- 背景图片：文件名包含"Background"的JPG文件

## 技术架构

### 前端技术
- **HTML5** - 页面结构
- **CSS3** - 样式和渐变效果
- **JavaScript ES6+** - 核心逻辑

### 依赖库
- **JSZip** - ZIP文件解压和压缩
- **js-yaml** - YAML配置文件解析和生成
- **Supabase** - 使用统计记录

### 核心功能模块
- 文件解压和验证
- 配置文件解析
- 元数据提取和补充
- ARCpkg包生成
- 进度跟踪和日志记录

## 开发说明

### 项目结构
```
├── index.html          # 主页面
├── style.css           # 样式文件
├── app.js              # 核心逻辑
└── README.md           # 说明文档
```

### 本地运行
1. 克隆或下载项目文件
2. 在浏览器中打开 `index.html`
3. 无需服务器配置，直接使用

### 自定义配置
- 修改 `SUPABASE_URL` 和 `SUPABASE_ANON_KEY` 来连接自己的Supabase实例
- 调整 `DIFF_MAPPING` 来修改难度名称映射
- 修改样式文件来自定义界面外观

## 注意事项

- **文件大小限制**：单个ZIP文件不超过50MB
- **浏览器兼容**：支持现代浏览器（Chrome、Firefox、Safari、Edge）
- **网络要求**：需要连接互联网以下载依赖库
- **数据处理**：所有文件处理均在本地进行，不会上传到服务器

## 故障排除

### 常见问题

1. **文件无法识别**
   - 确保ZIP包包含必需的三个文件
   - 检查文件名是否正确

2. **转换失败**
   - 查看日志区域获取详细错误信息
   - 检查ZIP文件是否损坏

3. **背景图片不显示**
   - 确保背景图片为JPG格式
   - 检查图片文件名是否包含"Background"

### 错误代码说明
- `等待手动输入信息` - 缺少必要的元数据，需要手动输入
- `等待背景图片输入` - 检测到需要背景图片，等待用户操作
- `缺少必需的文件` - ZIP包中缺少必要的文件

## 许可证

本项目采用MIT许可证。详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进这个工具。

## 技术支持

如有问题或建议，请通过GitHub Issues提交反馈。